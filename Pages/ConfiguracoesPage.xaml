<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="UAUIngleza_plc.Pages.ConfiguracoesPage"
             Title="ConfiguraÃ§Ã£o PLC"
             BackgroundColor="{AppThemeBinding Light=#FAFAFA, Dark=#1a1a1a}">

    <ScrollView Padding="20">
        <VerticalStackLayout Spacing="20">

            <Label Text="âš™ï¸ ConfiguraÃ§Ã£o do PLC" 
                   FontSize="28" 
                   FontAttributes="Bold"
                   TextColor="{AppThemeBinding Light=#1a1a1a, Dark=#FFFFFF}"
                   Margin="0,10,0,20" />

            <!-- IP Address -->
            <VerticalStackLayout Spacing="8">
                <Label Text="ðŸ“¡ EndereÃ§o IP:" 
                       FontAttributes="Bold"
                       FontSize="14"
                       TextColor="{AppThemeBinding Light=#333, Dark=#DDD}" />
                <Entry x:Name="IpEntry" 
                       Text="{Binding IpAddress}" 
                       Placeholder="192.168.1.100"
                       Keyboard="Telephone"
                       PlaceholderColor="{AppThemeBinding Light=#999, Dark=#666}"
                       TextColor="{AppThemeBinding Light=#000, Dark=#FFF}"
                       BackgroundColor="{AppThemeBinding Light=#FFF, Dark=#2a2a2a}"/>
            </VerticalStackLayout>

            <!-- Rack -->
            <VerticalStackLayout Spacing="8">
                <Label Text="ðŸ”§ Rack:" 
                       FontAttributes="Bold"
                       FontSize="14"
                       TextColor="{AppThemeBinding Light=#333, Dark=#DDD}" />
                <Entry Text="{Binding Rack}" 
                       Placeholder="0"
                       Keyboard="Numeric"
                       PlaceholderColor="{AppThemeBinding Light=#999, Dark=#666}"
                       TextColor="{AppThemeBinding Light=#000, Dark=#FFF}"
                       BackgroundColor="{AppThemeBinding Light=#FFF, Dark=#2a2a2a}"/>
            </VerticalStackLayout>

            <!-- Slot -->
            <VerticalStackLayout Spacing="8">
                <Label Text="ðŸ“ Slot:" 
                       FontAttributes="Bold"
                       FontSize="14"
                       TextColor="{AppThemeBinding Light=#333, Dark=#DDD}" />
                <Entry Text="{Binding Slot}" 
                       Placeholder="0"
                       Keyboard="Numeric"
                       PlaceholderColor="{AppThemeBinding Light=#999, Dark=#666}"
                       TextColor="{AppThemeBinding Light=#000, Dark=#FFF}"
                       BackgroundColor="{AppThemeBinding Light=#FFF, Dark=#2a2a2a}"/>
            </VerticalStackLayout>

            <!-- Status Message -->
            <Border Padding="15" 
                   Margin="0,10,0,0"
                   BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#222}">
                <Label Text="{Binding StatusMessage}" 
                       FontSize="14"
                       TextColor="{AppThemeBinding Light=#555, Dark=#BBB}"
                       LineBreakMode="WordWrap" />
            </Border>

            <!-- Buttons -->
            <VerticalStackLayout Spacing="12" Margin="0,20,0,0">
                <Button Text="ðŸ’¾ Salvar ConfiguraÃ§Ã£o" 
                        Command="{Binding SaveConfigCommand}"
                        BackgroundColor="#2196F3"
                        TextColor="White"
                        FontAttributes="Bold"
                        Padding="15,12"
                        CornerRadius="8"
                        FontSize="16" />

                <Button Text="ðŸ”— Conectar ao PLC" 
                        Command="{Binding ConnectCommand}"
                        IsEnabled="{Binding IsConnecting, Converter={StaticResource InvertedBoolConverter}}"
                        BackgroundColor="#4CAF50"
                        TextColor="White"
                        FontAttributes="Bold"
                        Padding="15,12"
                        CornerRadius="8"
                        FontSize="16" />

                <Button Text="ðŸ”Œ Desconectar" 
                        Command="{Binding DisconnectCommand}"
                        IsEnabled="{Binding IsConnected}"
                        BackgroundColor="#f44336"
                        TextColor="White"
                        FontAttributes="Bold"
                        Padding="15,12"
                        CornerRadius="8"
                        FontSize="16" />
            </VerticalStackLayout>

            <!-- Connection Status -->
            <Frame BorderColor="{Binding IsConnected, Converter={StaticResource ConnectionBorderConverter}}" 
                   CornerRadius="10" 
                   Padding="15" 
                   Margin="0,20,0,0"
                   BackgroundColor="{Binding IsConnected, Converter={StaticResource ConnectionBgConverter}}">
                <VerticalStackLayout>
                    <Label Text="Status da ConexÃ£o:" 
                           FontAttributes="Bold"
                           FontSize="16"
                           TextColor="{AppThemeBinding Light=#333, Dark=#FFF}" />
                    <Label Text="{Binding IsConnected, StringFormat='Conectado: {0}'}" 
                           FontSize="14"
                           TextColor="{Binding IsConnected, Converter={StaticResource ConnectionColorConverter}}" />
                </VerticalStackLayout>
            </Frame>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>